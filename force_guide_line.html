<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="icon" href="github.ico" type="image/x-icon">
	<link rel="shortcut" href="github.ico" type="image/x-icon">
    <title>rogeroyer</title>
  </head> 

<style>
</style>
    <body>  
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>  
        <script>		   
					   
		var nodes = [ {name: "蒙古旿内蒙叿"},
					{name: "回族"},
					{name: "藏族"},
					{name: "维吾尔族"},
					{name: "苗族"},
					{name: "彝族"},
					{name: "壮族"},
					{name: "布依旿"},
					{name: "朝鲜旿"},
					{name: "满族"},
					{name: "侗族"},
					{name: "瑶族"},
					{name: "白族"},
					{name: "土家旿"},
					{name: "哈尼旿"},
					{name: "哈萨克族"},
					{name: "傣族"},
					{name: "黎族"},
					{name: "傈僳旿"},
					{name: "佤族"},
					{name: "畲族"},
					{name: "高山旿"},
					{name: "拉祜旿"},
					{name: "水族"},
					{name: "东乡旿"},
					{name: "纳西旿"},
					{name: "景颇旿"},
					{name: "柯尔克孜旿"},
					{name: "土族"},
					{name: "达斡尔族"},
					{name: "仫佬旿"},
					{name: "羌族"},
					{name: "布朗旿"},
					{name: "撒拉旿"},
					{name: "毛南旿"},
					{name: "仡佬旿"},
					{name: "锡伯旿"},
					{name: "阿昌旿"},
					{name: "普米旿"},
					{name: "塔吉克族"},
					{name: "怒族"},
					{name: "乌孜别克旿"},
					{name: "俄罗斯族"},
					{name: "鄂温克族"},
					{name: "德昂旿"},
					{name: "保安旿"},
					{name: "裕固旿"},
					{name: "京族"},
					{name: "塔塔尔族"},
					{name: "独龙旿"},
					{name: "鄂伦春族"},
					{name: "赫哲旿"},
					{name: "门巴旿"},
					{name: "珞巴旿"},
					{name: "基诺旿"},
					{name: "四川"},
					{name: "江西"},
					{name: "北京"},
					{name: "甘肃"},
					{name: "云南"},
					{name: "海南"},
					{name: "台湾"},
					{name: "贵州"},
					{name: "广西"},
					{name: "重庆"},
					{name: "吉林"},
					{name: "福建"},
					{name: "陕西"},
					{name: "安徽"},
					{name: "内蒙叿"},
					{name: "青海"},
					{name: "湖北"},
					{name: "西藏"},
					{name: "广东"},
					{name: "河北"},
					{name: "江苏"},
					{name: "浙江"},
					{name: "新疆"},
					{name: "天津"},
					{name: "湖南"},
					{name: "辽宁"},
					{name: "山东"},
					{name: "宁夏"},
					{name: "河南"},
					{name: "黑龙汿"}
					];
					 
		var edges = [{source: 0, target: 80},
					{source: 0, target: 65},
					{source: 0, target: 74},
					{source: 0, target: 84},
					{source: 0, target: 77},
					{source: 1, target: 82},
					{source: 1, target: 58},
					{source: 1, target: 83},
					{source: 1, target: 77},
					{source: 1, target: 70},
					{source: 1, target: 59},
					{source: 1, target: 74},
					{source: 1, target: 81},
					{source: 1, target: 68},
					{source: 1, target: 80},
					{source: 1, target: 57},
					{source: 1, target: 69},
					{source: 1, target: 78},
					{source: 1, target: 84},
					{source: 1, target: 67},
					{source: 1, target: 62},
					{source: 1, target: 65},
					{source: 1, target: 75},
					{source: 1, target: 55},
					{source: 2, target: 72},
					{source: 2, target: 55},
					{source: 2, target: 70},
					{source: 2, target: 58},
					{source: 2, target: 59},
					{source: 3, target: 77},
					{source: 4, target: 62},
					{source: 4, target: 79},
					{source: 4, target: 59},
					{source: 4, target: 63},
					{source: 4, target: 64},
					{source: 4, target: 71},
					{source: 4, target: 55},
					{source: 5, target: 59},
					{source: 5, target: 55},
					{source: 5, target: 62},
					{source: 6, target: 63},
					{source: 6, target: 59},
					{source: 6, target: 73},
					{source: 7, target: 62},
					{source: 8, target: 65},
					{source: 8, target: 84},
					{source: 8, target: 80},
					{source: 9, target: 80},
					{source: 9, target: 74},
					{source: 9, target: 84},
					{source: 9, target: 65},
					{source: 9, target: 69},
					{source: 9, target: 57},
					{source: 10, target: 62},
					{source: 10, target: 79},
					{source: 10, target: 63},
					{source: 11, target: 63},
					{source: 11, target: 79},
					{source: 11, target: 59},
					{source: 11, target: 73},
					{source: 12, target: 59},
					{source: 12, target: 62},
					{source: 12, target: 79},
					{source: 13, target: 79},
					{source: 13, target: 71},
					{source: 13, target: 64},
					{source: 13, target: 62},
					{source: 14, target: 59},
					{source: 15, target: 77},
					{source: 16, target: 59},
					{source: 17, target: 60},
					{source: 18, target: 59},
					{source: 18, target: 55},
					{source: 19, target: 59},
					{source: 20, target: 66},
					{source: 20, target: 76},
					{source: 20, target: 56},
					{source: 20, target: 73},
					{source: 21, target: 61},
					{source: 21, target: 66},
					{source: 22, target: 59},
					{source: 23, target: 62},
					{source: 23, target: 63},
					{source: 24, target: 58},
					{source: 24, target: 77},
					{source: 25, target: 59},
					{source: 26, target: 59},
					{source: 27, target: 77},
					{source: 28, target: 70},
					{source: 28, target: 58},
					{source: 29, target: 69},
					{source: 29, target: 84},
					{source: 30, target: 63},
					{source: 31, target: 55},
					{source: 32, target: 59},
					{source: 33, target: 70},
					{source: 34, target: 63},
					{source: 35, target: 62},
					{source: 36, target: 80},
					{source: 36, target: 77},
					{source: 37, target: 59},
					{source: 38, target: 59},
					{source: 39, target: 77},
					{source: 40, target: 59},
					{source: 41, target: 77},
					{source: 42, target: 77},
					{source: 42, target: 84},
					{source: 43, target: 69},
					{source: 44, target: 59},
					{source: 45, target: 58},
					{source: 46, target: 58},
					{source: 47, target: 63},
					{source: 48, target: 77},
					{source: 49, target: 59},
					{source: 50, target: 84},
					{source: 50, target: 69},
					{source: 51, target: 84},
					{source: 52, target: 72},
					{source: 53, target: 72},
					{source: 54, target: 59}];	
		
		var width = 1920;
		var height = 1400;
		
		
		var svg = d3.select("body")
					.append("svg")
					.attr("width",width)
					.attr("height",height);
		
		var force = d3.layout.force()
				.nodes(nodes)		//指定节点数组
				.links(edges)		//指定连线数组
				.size([width,height])	//指定范围
				.linkDistance(150)	//指定连线长度
				.charge(-400);	//相互之间的作用力
		force.start();	//开始作用
		console.log(nodes);
		console.log(edges);
		
		//添加连线		
		var svg_edges = svg.selectAll("line")
							.data(edges)
							.enter()
							.append("line")
							.style("stroke","#ccc")
							.style("stroke-width",1);
		
		var color = d3.scale.category20();
				
		//添加节点			
		var svg_nodes = svg.selectAll("circle")
							.data(nodes)
							.enter()
							.append("circle")
							.attr("r",20)
							.style("fill",function(d,i){
								return color(i);
							})
							.call(force.drag);	//使得节点能够拖动
		//添加描述节点的文字
		var svg_texts = svg.selectAll("text")
							.data(nodes)
							.enter()
							.append("text")
							.style("fill", "black")
							.attr("dx", 20)
							.attr("dy", 8)
							.text(function(d){
								return d.name;
							});
					
		force.on("tick", function(){	//对于每一个时间间隔
		
			 //更新连线坐标
			 svg_edges.attr("x1",function(d){ return d.source.x; })
			 		.attr("y1",function(d){ return d.source.y; })
			 		.attr("x2",function(d){ return d.target.x; })
			 		.attr("y2",function(d){ return d.target.y; });
			 
			 //更新节点坐标
			 svg_nodes.attr("cx",function(d){ return d.x; })
			 		.attr("cy",function(d){ return d.y; });
			 //更新文字坐标
			 svg_texts.attr("x", function(d){ return d.x; })
			 	.attr("y", function(d){ return d.y; });
		});
		  
        </script>  
		
    </body>  
</html>  
